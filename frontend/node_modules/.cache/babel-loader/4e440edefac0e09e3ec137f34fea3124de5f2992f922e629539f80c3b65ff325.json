{"ast":null,"code":"import React from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,useNavigate}from\"react-router-dom\";import\"./global.css\";import\"./App.css\";import\"./User/user-pages.css\";import UserDashboard from\"./User/UserDashboard\";// Pages\nimport Login from\"./Authentication/Login\";import SignUp from\"./Authentication/SignUp\";import AdminDashboard from\"./AdminPortal/AdminDashboard\";import BrowseServices from\"./User/ManageServices/BrowseServices\";import Home from\"./Guest/Home\";import AddPhotos from\"./Guest/AddPhotos\";import ParkingCapacity from\"./Guest/ParkingCapacity\";import InvitationView from\"./Guest/InvitationView\";import WeddingAlbum from\"./Guest/album\";// Auth API helpers\nimport{loginAccount,registerAccount}from\"./api/client\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUpPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/:id\",element:/*#__PURE__*/_jsx(AdminDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user/:id\",element:/*#__PURE__*/_jsx(UserDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/user/services\",element:/*#__PURE__*/_jsx(BrowseServices,{})}),/*#__PURE__*/_jsx(Route,{path:\"/album\",element:/*#__PURE__*/_jsx(WeddingAlbum,{})}),/*#__PURE__*/_jsx(Route,{path:\"/invite/:invitationId/photos\",element:/*#__PURE__*/_jsx(AddPhotos,{})}),/*#__PURE__*/_jsx(Route,{path:\"/invite/:invitationId/parking\",element:/*#__PURE__*/_jsx(ParkingCapacity,{})}),/*#__PURE__*/_jsx(Route,{path:\"/invitation/shared/:id\",element:/*#__PURE__*/_jsx(InvitationView,{})})]})});}// ---------- Login wrapper ----------\nfunction LoginPage(){const navigate=useNavigate();async function handleLogin(form){try{console.log(\"Login form:\",form);const{user,token}=await loginAccount({email:form.email,password:form.password});localStorage.setItem(\"authToken\",token);localStorage.setItem(\"currentUser\",JSON.stringify(user));// ⭐ role-based URL: /role/id\nconst pathRole=(user.role||\"\").toLowerCase();// 'ADMIN' -> 'admin'\nnavigate(\"/\".concat(pathRole,\"/\").concat(user.id));}catch(err){console.error(\"Login failed:\",err);alert(\"Login failed. Please check your email and password.\");}}return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onGoSignUp:()=>navigate(\"/signup\")});}// ---------- SignUp wrapper ----------\nfunction SignUpPage(){const navigate=useNavigate();async function handleSignUp(form){try{console.log(\"SignUp form:\",form);const{user,token}=await registerAccount({full_name:form.fullName,email:form.email,password:form.password});localStorage.setItem(\"authToken\",token);localStorage.setItem(\"currentUser\",JSON.stringify(user));// new users always have role = 'USER' from backend\nconst pathRole=(user.role||\"\").toLowerCase();// should be 'user'\nnavigate(\"/\".concat(pathRole,\"/\").concat(user.id));}catch(err){console.error(\"Sign up failed:\",err);alert(\"Sign up failed. Try a different email.\");}}return/*#__PURE__*/_jsx(SignUp,{onSignUp:handleSignUp,onGoLogin:()=>navigate(\"/login\")});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","useNavigate","UserDashboard","Login","SignUp","AdminDashboard","BrowseServices","Home","AddPhotos","ParkingCapacity","InvitationView","WeddingAlbum","loginAccount","registerAccount","jsx","_jsx","jsxs","_jsxs","App","children","path","element","to","replace","LoginPage","SignUpPage","navigate","handleLogin","form","console","log","user","token","email","password","localStorage","setItem","JSON","stringify","pathRole","role","toLowerCase","concat","id","err","error","alert","onLogin","onGoSignUp","handleSignUp","full_name","fullName","onSignUp","onGoLogin"],"sources":["C:/Users/Lenovo/Desktop/ll/Wedding-Planner-App/frontend/src/App.js"],"sourcesContent":["import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n  Navigate,\r\n  useNavigate,\r\n} from \"react-router-dom\";\r\nimport \"./global.css\"; \r\nimport \"./App.css\";\r\nimport \"./User/user-pages.css\";\r\nimport UserDashboard from \"./User/UserDashboard\";\r\n// Pages\r\nimport Login from \"./Authentication/Login\";\r\nimport SignUp from \"./Authentication/SignUp\";\r\nimport AdminDashboard from \"./AdminPortal/AdminDashboard\";\r\nimport BrowseServices from \"./User/ManageServices/BrowseServices\";\r\n\r\nimport Home from \"./Guest/Home\";\r\nimport AddPhotos from \"./Guest/AddPhotos\";\r\nimport ParkingCapacity from \"./Guest/ParkingCapacity\";\r\nimport InvitationView from \"./Guest/InvitationView\";\r\nimport WeddingAlbum from \"./Guest/album\";\r\n\r\n\r\n// Auth API helpers\r\nimport { loginAccount, registerAccount } from \"./api/client\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        {/* default -> login */}\r\n        <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\r\n\r\n        <Route path=\"/login\" element={<LoginPage />} />\r\n        <Route path=\"/signup\" element={<SignUpPage />} />\r\n\r\n        {/* role-based routes */}\r\n        {/* /admin/:id -> Admin dashboard */}\r\n        <Route path=\"/admin/:id\" element={<AdminDashboard />} />\r\n        {/* /user/:id -> normal user home (for now using Guest Home) */}\r\n        <Route path=\"/user/:id\" element={<UserDashboard />} />\r\n        {/* if you ever add guests: <Route path=\"/guest/:id\" ... /> */}\r\n        <Route path=\"/home\" element={<Home />} />\r\n        <Route path=\"/user/services\" element={<BrowseServices />} />\r\n         <Route path=\"/album\" element={<WeddingAlbum />} />\r\n\r\n\r\n        {/* invitation routes keep working */}\r\n        <Route path=\"/invite/:invitationId/photos\" element={<AddPhotos />} />\r\n        <Route\r\n          path=\"/invite/:invitationId/parking\"\r\n          element={<ParkingCapacity />}\r\n        />\r\n        {/* Shareable invitation link */}\r\n        <Route path=\"/invitation/shared/:id\" element={<InvitationView />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\n// ---------- Login wrapper ----------\r\nfunction LoginPage() {\r\n  const navigate = useNavigate();\r\n\r\n  async function handleLogin(form) {\r\n    try {\r\n      console.log(\"Login form:\", form);\r\n\r\n      const { user, token } = await loginAccount({\r\n        email: form.email,\r\n        password: form.password,\r\n      });\r\n\r\n      localStorage.setItem(\"authToken\", token);\r\n      localStorage.setItem(\"currentUser\", JSON.stringify(user));\r\n\r\n      // ⭐ role-based URL: /role/id\r\n      const pathRole = (user.role || \"\").toLowerCase(); // 'ADMIN' -> 'admin'\r\n      navigate(`/${pathRole}/${user.id}`);\r\n    } catch (err) {\r\n      console.error(\"Login failed:\", err);\r\n      alert(\"Login failed. Please check your email and password.\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Login\r\n      onLogin={handleLogin}\r\n      onGoSignUp={() => navigate(\"/signup\")}\r\n    />\r\n  );\r\n}\r\n\r\n// ---------- SignUp wrapper ----------\r\nfunction SignUpPage() {\r\n  const navigate = useNavigate();\r\n\r\n  async function handleSignUp(form) {\r\n    try {\r\n      console.log(\"SignUp form:\", form);\r\n\r\n      const { user, token } = await registerAccount({\r\n        full_name: form.fullName,\r\n        email: form.email,\r\n        password: form.password,\r\n      });\r\n\r\n      localStorage.setItem(\"authToken\", token);\r\n      localStorage.setItem(\"currentUser\", JSON.stringify(user));\r\n\r\n      // new users always have role = 'USER' from backend\r\n      const pathRole = (user.role || \"\").toLowerCase(); // should be 'user'\r\n      navigate(`/${pathRole}/${user.id}`);\r\n    } catch (err) {\r\n      console.error(\"Sign up failed:\", err);\r\n      alert(\"Sign up failed. Try a different email.\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <SignUp\r\n      onSignUp={handleSignUp}\r\n      onGoLogin={() => navigate(\"/login\")}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}