{"ast":null,"code":"import React,{useState,useEffect,useMemo}from\"react\";import axios from\"axios\";import\"./admin.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:5000\";// adjust if your backend runs elsewhere\nexport default function Feedback(){const[feedbackList,setFeedbackList]=useState([]);const[search,setSearch]=useState(\"\");const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");// Fetch feedback from backend\nuseEffect(()=>{let mounted=true;const fetchFeedback=async()=>{try{setLoading(true);const res=await axios.get(\"\".concat(API_BASE,\"/api/feedback\"));const data=Array.isArray(res.data)?res.data:[];if(!mounted)return;setFeedbackList(data);setError(\"\");}catch(err){console.warn(\"No backend data yet, showing empty layout.\",err);if(mounted){setFeedbackList([]);setError(\"Failed to load feedback from server.\");}}finally{if(mounted)setLoading(false);}};fetchFeedback();return()=>{mounted=false;};},[]);// Filter feedback by search text (name, email, comment)\nconst filteredFeedback=useMemo(()=>{const term=search.trim().toLowerCase();if(!term)return feedbackList;return feedbackList.filter(fb=>{var _fb$full_name,_fb$email,_fb$comment;return((_fb$full_name=fb.full_name)===null||_fb$full_name===void 0?void 0:_fb$full_name.toLowerCase().includes(term))||((_fb$email=fb.email)===null||_fb$email===void 0?void 0:_fb$email.toLowerCase().includes(term))||((_fb$comment=fb.comment)===null||_fb$comment===void 0?void 0:_fb$comment.toLowerCase().includes(term));});},[feedbackList,search]);// Delete feedback\nconst handleDelete=async id=>{if(!window.confirm(\"Delete this feedback?\"))return;const prev=[...feedbackList];setFeedbackList(list=>list.filter(fb=>fb.id!==id));try{await axios.delete(\"\".concat(API_BASE,\"/api/feedback/\").concat(id));}catch(err){alert(\"Failed to delete feedback, reverting.\");setFeedbackList(prev);}};const formatDate=iso=>iso?new Date(iso).toLocaleString():\"—\";return/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:\"1rem\"},children:\"User Feedback\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"1rem\",display:\"flex\",gap:\"8px\"},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name, email, or comment...\",value:search,onChange:e=>setSearch(e.target.value),style:{maxWidth:320}})}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#b42318\",marginBottom:10,fontSize:14},children:error}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"20%\"},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"25%\"},children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"35%\"},children:\"Comment\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"12%\"},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"8%\"},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",style:{textAlign:\"center\",padding:\"20px\"},children:\"Loading feedback...\"})}):filteredFeedback.length>0?filteredFeedback.map(fb=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:fb.full_name||\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:fb.email||\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:fb.comment||\"—\"}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(fb.created_at)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>alert(\"From: \".concat(fb.full_name||fb.email,\"\\n\\n\").concat(fb.comment||\"\")),children:\"View\"}),\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDelete(fb.id),children:\"Delete\"})]})]},fb.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",style:{textAlign:\"center\",color:\"#777\",fontStyle:\"italic\",padding:\"20px\"},children:\"No feedback yet \\u2014 your users\\u2019 feedback will appear here once added.\"})})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","axios","jsx","_jsx","jsxs","_jsxs","API_BASE","Feedback","feedbackList","setFeedbackList","search","setSearch","loading","setLoading","error","setError","mounted","fetchFeedback","res","get","concat","data","Array","isArray","err","console","warn","filteredFeedback","term","trim","toLowerCase","filter","fb","_fb$full_name","_fb$email","_fb$comment","full_name","includes","email","comment","handleDelete","id","window","confirm","prev","list","delete","alert","formatDate","iso","Date","toLocaleString","className","children","style","marginBottom","display","gap","type","placeholder","value","onChange","e","target","maxWidth","color","fontSize","width","colSpan","textAlign","padding","length","map","created_at","onClick","fontStyle"],"sources":["C:/Users/Lenovo/Desktop/ll/Wedding-Planner-App/frontend/src/AdminPortal/Feedback.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./admin.css\";\r\n\r\nconst API_BASE = \"http://localhost:5000\"; // adjust if your backend runs elsewhere\r\n\r\nexport default function Feedback() {\r\n  const [feedbackList, setFeedbackList] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Fetch feedback from backend\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const fetchFeedback = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await axios.get(`${API_BASE}/api/feedback`);\r\n        const data = Array.isArray(res.data) ? res.data : [];\r\n        if (!mounted) return;\r\n        setFeedbackList(data);\r\n        setError(\"\");\r\n      } catch (err) {\r\n        console.warn(\"No backend data yet, showing empty layout.\", err);\r\n        if (mounted) {\r\n          setFeedbackList([]);\r\n          setError(\"Failed to load feedback from server.\");\r\n        }\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFeedback();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // Filter feedback by search text (name, email, comment)\r\n  const filteredFeedback = useMemo(() => {\r\n    const term = search.trim().toLowerCase();\r\n    if (!term) return feedbackList;\r\n\r\n    return feedbackList.filter((fb) => {\r\n      return (\r\n        fb.full_name?.toLowerCase().includes(term) ||\r\n        fb.email?.toLowerCase().includes(term) ||\r\n        fb.comment?.toLowerCase().includes(term)\r\n      );\r\n    });\r\n  }, [feedbackList, search]);\r\n\r\n  // Delete feedback\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete this feedback?\")) return;\r\n\r\n    const prev = [...feedbackList];\r\n    setFeedbackList((list) => list.filter((fb) => fb.id !== id));\r\n\r\n    try {\r\n      await axios.delete(`${API_BASE}/api/feedback/${id}`);\r\n    } catch (err) {\r\n      alert(\"Failed to delete feedback, reverting.\");\r\n      setFeedbackList(prev);\r\n    }\r\n  };\r\n\r\n  const formatDate = (iso) =>\r\n    iso ? new Date(iso).toLocaleString() : \"—\";\r\n\r\n  return (\r\n    <div className=\"panel\">\r\n      <h2 style={{ marginBottom: \"1rem\" }}>User Feedback</h2>\r\n\r\n      {/* Search bar */}\r\n      <div style={{ marginBottom: \"1rem\", display: \"flex\", gap: \"8px\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by name, email, or comment...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          style={{ maxWidth: 320 }}\r\n        />\r\n      </div>\r\n\r\n      {error && (\r\n        <div\r\n          style={{\r\n            color: \"#b42318\",\r\n            marginBottom: 10,\r\n            fontSize: 14,\r\n          }}\r\n        >\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Feedback Table */}\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ width: \"20%\" }}>Name</th>\r\n            <th style={{ width: \"25%\" }}>Email</th>\r\n            <th style={{ width: \"35%\" }}>Comment</th>\r\n            <th style={{ width: \"12%\" }}>Date</th>\r\n            <th style={{ width: \"8%\" }}>Actions</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {loading ? (\r\n            <tr>\r\n              <td colSpan=\"5\" style={{ textAlign: \"center\", padding: \"20px\" }}>\r\n                Loading feedback...\r\n              </td>\r\n            </tr>\r\n          ) : filteredFeedback.length > 0 ? (\r\n            filteredFeedback.map((fb) => (\r\n              <tr key={fb.id}>\r\n                <td>{fb.full_name || \"—\"}</td>\r\n                <td>{fb.email || \"—\"}</td>\r\n                <td>{fb.comment || \"—\"}</td>\r\n                <td>{formatDate(fb.created_at)}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn\"\r\n                    onClick={() =>\r\n                      alert(\r\n                        `From: ${fb.full_name || fb.email}\\n\\n${fb.comment || \"\"}`\r\n                      )\r\n                    }\r\n                  >\r\n                    View\r\n                  </button>{\" \"}\r\n                  <button\r\n                    className=\"btn btn-danger\"\r\n                    onClick={() => handleDelete(fb.id)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td\r\n                colSpan=\"5\"\r\n                style={{\r\n                  textAlign: \"center\",\r\n                  color: \"#777\",\r\n                  fontStyle: \"italic\",\r\n                  padding: \"20px\",\r\n                }}\r\n              >\r\n                No feedback yet — your users’ feedback will appear here once\r\n                added.\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}