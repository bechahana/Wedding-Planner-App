{"ast":null,"code":"// src/User/BrowseServices.js\nimport React,{useEffect,useState,useMemo}from\"react\";import\"../user-pages.css\";// or reuse admin.css for now\nimport{listServices}from\"../../api/client\";import{SERVICE_TYPES_WITH_ALL}from\"../../constants/serviceTypes\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BrowseServices(){const[services,setServices]=useState([]);const[loading,setLoading]=useState(true);const[err,setErr]=useState(\"\");const[typeFilter,setTypeFilter]=useState(\"All\");const[search,setSearch]=useState(\"\");useEffect(()=>{let mounted=true;setLoading(true);setErr(\"\");listServices({service_type:typeFilter===\"All\"?undefined:typeFilter}).then(data=>{if(mounted)setServices(data);}).catch(e=>{console.error(e);if(mounted)setErr(\"Failed to load services\");}).finally(()=>{if(mounted)setLoading(false);});return()=>{mounted=false;};},[typeFilter]);const filtered=useMemo(()=>{const term=search.trim().toLowerCase();return services.filter(s=>{if(!term)return true;const text=\"\".concat(s.name,\" \").concat(s.address||\"\",\" \").concat(s.description||\"\",\" \").concat(s.email||\"\").toLowerCase();return text.includes(term);});},[services,search]);return/*#__PURE__*/_jsxs(\"div\",{className:\"user-services-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Available Wedding Services\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"service-filters\",children:[/*#__PURE__*/_jsx(\"select\",{value:typeFilter,onChange:e=>setTypeFilter(e.target.value),children:SERVICE_TYPES_WITH_ALL.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t,children:t},t))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name, address, description\\u2026\",value:search,onChange:e=>setSearch(e.target.value)})]}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading services\\u2026\"}),err&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:err}),!loading&&!err&&filtered.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No services found for this filter.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"service-list\",children:filtered.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"service-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"service-type\",children:s.service_type}),/*#__PURE__*/_jsx(\"h3\",{children:s.name}),s.address&&/*#__PURE__*/_jsx(\"p\",{children:s.address}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \\u20AC\",s.price]}),s.description&&/*#__PURE__*/_jsx(\"p\",{children:s.description}),s.photos&&s.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"service-photos\",children:s.photos.map((url,i)=>/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"\".concat(s.name,\" \").concat(i+1)},i))}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Contact: \",s.phone_number||\"N/A\",\" | \",s.email]})]},s.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","useMemo","listServices","SERVICE_TYPES_WITH_ALL","jsx","_jsx","jsxs","_jsxs","BrowseServices","services","setServices","loading","setLoading","err","setErr","typeFilter","setTypeFilter","search","setSearch","mounted","service_type","undefined","then","data","catch","e","console","error","finally","filtered","term","trim","toLowerCase","filter","s","text","concat","name","address","description","email","includes","className","children","value","onChange","target","map","t","type","placeholder","length","price","photos","url","i","src","alt","phone_number","id"],"sources":["C:/Users/Lenovo/Desktop/ll/Wedding-Planner-App/frontend/src/User/ManageServices/BrowseServices.js"],"sourcesContent":["// src/User/BrowseServices.js\r\nimport React, { useEffect, useState, useMemo } from \"react\";\r\nimport \"../user-pages.css\"; // or reuse admin.css for now\r\nimport { listServices } from \"../../api/client\";\r\nimport { SERVICE_TYPES_WITH_ALL } from \"../../constants/serviceTypes\";\r\n\r\nexport default function BrowseServices() {\r\n  const [services, setServices] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n  const [typeFilter, setTypeFilter] = useState(\"All\");\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    setLoading(true);\r\n    setErr(\"\");\r\n\r\n    listServices({\r\n      service_type: typeFilter === \"All\" ? undefined : typeFilter,\r\n    })\r\n      .then((data) => {\r\n        if (mounted) setServices(data);\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n        if (mounted) setErr(\"Failed to load services\");\r\n      })\r\n      .finally(() => {\r\n        if (mounted) setLoading(false);\r\n      });\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [typeFilter]);\r\n\r\n  const filtered = useMemo(() => {\r\n    const term = search.trim().toLowerCase();\r\n    return services.filter((s) => {\r\n      if (!term) return true;\r\n      const text =\r\n        `${s.name} ${s.address || \"\"} ${s.description || \"\"} ${s.email || \"\"}`.toLowerCase();\r\n      return text.includes(term);\r\n    });\r\n  }, [services, search]);\r\n\r\n  return (\r\n    <div className=\"user-services-page\">\r\n      <h2>Available Wedding Services</h2>\r\n\r\n      {/* Category filter */}\r\n      <div className=\"service-filters\">\r\n        <select\r\n          value={typeFilter}\r\n          onChange={(e) => setTypeFilter(e.target.value)}\r\n        >\r\n          {SERVICE_TYPES_WITH_ALL.map((t) => (\r\n            <option key={t} value={t}>\r\n              {t}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        {/* Simple text search */}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by name, address, description…\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {loading && <p>Loading services…</p>}\r\n      {err && <p className=\"error\">{err}</p>}\r\n\r\n      {!loading && !err && filtered.length === 0 && (\r\n        <p>No services found for this filter.</p>\r\n      )}\r\n\r\n      <div className=\"service-list\">\r\n        {filtered.map((s) => (\r\n          <div key={s.id} className=\"service-card\">\r\n            <div className=\"service-type\">{s.service_type}</div>\r\n            <h3>{s.name}</h3>\r\n            {s.address && <p>{s.address}</p>}\r\n            <p>Price: €{s.price}</p>\r\n            {s.description && <p>{s.description}</p>}\r\n            {s.photos && s.photos.length > 0 && (\r\n              <div className=\"service-photos\">\r\n                {s.photos.map((url, i) => (\r\n                  <img key={i} src={url} alt={`${s.name} ${i + 1}`} />\r\n                ))}\r\n              </div>\r\n            )}\r\n            <p>\r\n              Contact: {s.phone_number || \"N/A\"} | {s.email}\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}