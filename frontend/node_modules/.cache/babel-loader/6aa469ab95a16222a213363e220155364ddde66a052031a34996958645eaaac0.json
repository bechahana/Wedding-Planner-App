{"ast":null,"code":"// src/Guest/api/client.js\nimport axios from \"axios\";\n\n// In Create React App we use process.env.REACT_APP_*\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000/api\";\n\n// Base API client\nconst api = axios.create({\n  baseURL: API_BASE_URL\n});\n\n/* -----------------------------\r\n   UPLOAD GUEST PHOTOS\r\n------------------------------ */\nexport const uploadGuestPhotos = async (invitationId, files) => {\n  const formData = new FormData();\n  [...files].forEach(f => formData.append(\"photos\", f));\n  const {\n    data\n  } = await api.post(`/guests/events/${invitationId}/photos`, formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  return data; // { ok, count, ... }\n};\n\n/* -----------------------------\r\n   SUBMIT GUEST PARKING INFO\r\n------------------------------ */\nexport const submitGuestParking = async (invitationId, payload) => {\n  const {\n    data\n  } = await api.post(`/guests/events/${invitationId}/parking`, payload);\n  return data; // { ok: true, ... }\n};\n\n/* -----------------------------\r\n   GET PARKING AVAILABILITY\r\n------------------------------ */\nexport const getParkingAvailability = async () => {\n  const {\n    data\n  } = await api.get(\"/guests/parking/availability\");\n  return data.available; // number\n};\nexport const loginAccount = payload => api.post(\"/auth/login\", payload).then(res => res.data);\nexport const registerAccount = payload => api.post(\"/auth/register\", payload).then(res => res.data);\n\n// ADMIN: CREATE SERVICE\nexport const createService = async serviceData => {\n  const formData = new FormData();\n  formData.append(\"service_type\", serviceData.service_type);\n  formData.append(\"name\", serviceData.name);\n  formData.append(\"address\", serviceData.address || \"\");\n  formData.append(\"price\", serviceData.price);\n  formData.append(\"description\", serviceData.description || \"\");\n  formData.append(\"phone_number\", serviceData.phone_number || \"\");\n  formData.append(\"email\", serviceData.email);\n  if (serviceData.capacity) {\n    formData.append(\"capacity\", serviceData.capacity);\n  }\n  formData.append(\"dates\", JSON.stringify(Array.isArray(serviceData.dates) ? serviceData.dates : []));\n  if (Array.isArray(serviceData.photos)) {\n    serviceData.photos.forEach(file => {\n      formData.append(\"photos\", file); // MUST be \"photos\" to match upload.array(\"photos\")\n    });\n  }\n  try {\n    const res = await api.post(\"/services\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response;\n    console.error(\"createService error:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n    throw err; // so AddService catches and shows the red alert\n  }\n};\n\n/* -----------------------------\r\n   LIST SERVICES (admin + user)\r\n------------------------------ */\nexport const listServices = async (options = {}) => {\n  const params = {};\n\n  // options.service_type should be exactly one of:\n  // \"DJ\", \"Chef\", \"Cake Baker\", \"Florist\", \"Waiter\", \"Venue\"\n  if (options.service_type && options.service_type !== \"All\") {\n    params.service_type = options.service_type;\n  }\n  const {\n    data\n  } = await api.get(\"/services\", {\n    params\n  });\n  return Array.isArray(data.services) ? data.services : [];\n};\n\n// APPOINTMENTS API\nexport const listVendorsWithSlots = async appointmentType => {\n  const {\n    data\n  } = await api.get(\"/appointments/vendors\", {\n    params: {\n      type: appointmentType\n    }\n  });\n  return Array.isArray(data.vendors) ? data.vendors : [];\n};\nexport const bookAppointment = async details => {\n  // details should now include user_id\n  const {\n    data\n  } = await api.post(\"/appointments\", details);\n  return data;\n};\nexport const listUserAppointments = async user_id => {\n  const {\n    data\n  } = await api.get(\"/appointments/my\", {\n    params: {\n      user_id\n    }\n  });\n  return Array.isArray(data.appointments) ? data.appointments : [];\n};\n// If you want a “user-named” alias:\nexport const listServicesForUser = listServices;\n\n// INVITATIONS API\nexport const sendInvitations = async (venue_id, invitations, message, sender_id) => {\n  // invitations: [{ recipient_name, recipient_email }, ...]\n  const {\n    data\n  } = await api.post(\"/invitations\", {\n    sender_id,\n    venue_id,\n    invitations,\n    message\n  });\n  return data;\n};\nexport const listUserInvitations = async sender_id => {\n  const {\n    data\n  } = await api.get(\"/invitations/my\", {\n    params: {\n      sender_id\n    }\n  });\n  return Array.isArray(data.invitations) ? data.invitations : [];\n};\nexport const getInvitationById = async id => {\n  const {\n    data\n  } = await api.get(`/invitations/${id}`);\n  return data.invitation;\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","api","create","baseURL","uploadGuestPhotos","invitationId","files","formData","FormData","forEach","f","append","data","post","headers","submitGuestParking","payload","getParkingAvailability","get","available","loginAccount","then","res","registerAccount","createService","serviceData","service_type","name","address","price","description","phone_number","email","capacity","JSON","stringify","Array","isArray","dates","photos","file","err","_err$response","console","error","response","message","listServices","options","params","services","listVendorsWithSlots","appointmentType","type","vendors","bookAppointment","details","listUserAppointments","user_id","appointments","listServicesForUser","sendInvitations","venue_id","invitations","sender_id","listUserInvitations","getInvitationById","id","invitation"],"sources":["C:/Wedding-Planner-App/frontend/src/api/client.js"],"sourcesContent":["// src/Guest/api/client.js\r\nimport axios from \"axios\";\r\n\r\n// In Create React App we use process.env.REACT_APP_*\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000/api\";\r\n\r\n// Base API client\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n});\r\n\r\n/* -----------------------------\r\n   UPLOAD GUEST PHOTOS\r\n------------------------------ */\r\nexport const uploadGuestPhotos = async (invitationId, files) => {\r\n  const formData = new FormData();\r\n  [...files].forEach((f) => formData.append(\"photos\", f));\r\n\r\n  const { data } = await api.post(\r\n    `/guests/events/${invitationId}/photos`,\r\n    formData,\r\n    { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n  );\r\n\r\n  return data; // { ok, count, ... }\r\n};\r\n\r\n/* -----------------------------\r\n   SUBMIT GUEST PARKING INFO\r\n------------------------------ */\r\nexport const submitGuestParking = async (invitationId, payload) => {\r\n  const { data } = await api.post(\r\n    `/guests/events/${invitationId}/parking`,\r\n    payload\r\n  );\r\n  return data; // { ok: true, ... }\r\n};\r\n\r\n/* -----------------------------\r\n   GET PARKING AVAILABILITY\r\n------------------------------ */\r\nexport const getParkingAvailability = async () => {\r\n  const { data } = await api.get(\"/guests/parking/availability\");\r\n  return data.available; // number\r\n};\r\n\r\nexport const loginAccount = (payload) =>\r\n  api.post(\"/auth/login\", payload).then((res) => res.data);\r\n\r\nexport const registerAccount = (payload) =>\r\n  api.post(\"/auth/register\", payload).then((res) => res.data);\r\n\r\n// ADMIN: CREATE SERVICE\r\nexport const createService = async (serviceData) => {\r\n  const formData = new FormData();\r\n\r\n  formData.append(\"service_type\", serviceData.service_type);\r\n  formData.append(\"name\", serviceData.name);\r\n  formData.append(\"address\", serviceData.address || \"\");\r\n  formData.append(\"price\", serviceData.price);\r\n  formData.append(\"description\", serviceData.description || \"\");\r\n  formData.append(\"phone_number\", serviceData.phone_number || \"\");\r\n  formData.append(\"email\", serviceData.email);\r\n\r\n  if (serviceData.capacity) {\r\n    formData.append(\"capacity\", serviceData.capacity);\r\n  }\r\n\r\n  formData.append(\r\n    \"dates\",\r\n    JSON.stringify(Array.isArray(serviceData.dates) ? serviceData.dates : [])\r\n  );\r\n\r\n  if (Array.isArray(serviceData.photos)) {\r\n    serviceData.photos.forEach((file) => {\r\n      formData.append(\"photos\", file); // MUST be \"photos\" to match upload.array(\"photos\")\r\n    });\r\n  }\r\n\r\n  try {\r\n    const res = await api.post(\"/services\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"createService error:\", err.response?.data || err.message);\r\n    throw err; // so AddService catches and shows the red alert\r\n  }\r\n};\r\n\r\n/* -----------------------------\r\n   LIST SERVICES (admin + user)\r\n------------------------------ */\r\nexport const listServices = async (options = {}) => {\r\n  const params = {};\r\n\r\n  // options.service_type should be exactly one of:\r\n  // \"DJ\", \"Chef\", \"Cake Baker\", \"Florist\", \"Waiter\", \"Venue\"\r\n  if (options.service_type && options.service_type !== \"All\") {\r\n    params.service_type = options.service_type;\r\n  }\r\n\r\n  const { data } = await api.get(\"/services\", { params });\r\n  return Array.isArray(data.services) ? data.services : [];\r\n};\r\n\r\n// APPOINTMENTS API\r\nexport const listVendorsWithSlots = async (appointmentType) => {\r\n  const { data } = await api.get(\"/appointments/vendors\", {\r\n    params: { type: appointmentType }\r\n  });\r\n  return Array.isArray(data.vendors) ? data.vendors : [];\r\n};\r\n\r\nexport const bookAppointment = async (details) => {\r\n  // details should now include user_id\r\n  const { data } = await api.post(\"/appointments\", details);\r\n  return data;\r\n};\r\n\r\nexport const listUserAppointments = async (user_id) => {\r\n  const { data } = await api.get(\"/appointments/my\", { params: { user_id } });\r\n  return Array.isArray(data.appointments) ? data.appointments : [];\r\n};\r\n// If you want a “user-named” alias:\r\nexport const listServicesForUser = listServices;\r\n\r\n\r\n// INVITATIONS API\r\nexport const sendInvitations = async (venue_id, invitations, message, sender_id) => {\r\n  // invitations: [{ recipient_name, recipient_email }, ...]\r\n  const { data } = await api.post(\"/invitations\", {\r\n    sender_id,\r\n    venue_id,\r\n    invitations,\r\n    message\r\n  });\r\n  return data;\r\n};\r\n\r\nexport const listUserInvitations = async (sender_id) => {\r\n  const { data } = await api.get(\"/invitations/my\", { params: { sender_id } });\r\n  return Array.isArray(data.invitations) ? data.invitations : [];\r\n};\r\n\r\nexport const getInvitationById = async (id) => {\r\n  const { data } = await api.get(`/invitations/${id}`);\r\n  return data.invitation;\r\n};\r\n\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}