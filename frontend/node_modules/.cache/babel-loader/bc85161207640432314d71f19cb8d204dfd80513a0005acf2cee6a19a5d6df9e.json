{"ast":null,"code":"// src/Guest/api/client.js\nimport axios from\"axios\";// In Create React App we use process.env.REACT_APP_*\nconst API_BASE_URL=process.env.REACT_APP_API_BASE_URL||\"http://localhost:5000/api\";// Base API client\nconst api=axios.create({baseURL:API_BASE_URL});/* -----------------------------\r\n   UPLOAD GUEST PHOTOS\r\n------------------------------ */export const uploadGuestPhotos=async(invitationId,files)=>{const formData=new FormData();[...files].forEach(f=>formData.append(\"photos\",f));const{data}=await api.post(\"/guests/events/\".concat(invitationId,\"/photos\"),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});return data;// { ok, count, ... }\n};/* -----------------------------\r\n   SUBMIT GUEST PARKING INFO\r\n------------------------------ */export const submitGuestParking=async(invitationId,payload)=>{const{data}=await api.post(\"/guests/events/\".concat(invitationId,\"/parking\"),payload);return data;// { ok: true, ... }\n};/* -----------------------------\r\n   GET PARKING AVAILABILITY\r\n------------------------------ */export const getParkingAvailability=async()=>{const{data}=await api.get(\"/guests/parking/availability\");return data.available;// number\n};export const loginAccount=payload=>api.post(\"/auth/login\",payload).then(res=>res.data);export const registerAccount=payload=>api.post(\"/auth/register\",payload).then(res=>res.data);// ADMIN: CREATE SERVICE\nexport const createService=async serviceData=>{const formData=new FormData();formData.append(\"service_type\",serviceData.service_type);formData.append(\"name\",serviceData.name);formData.append(\"address\",serviceData.address||\"\");formData.append(\"price\",serviceData.price);formData.append(\"description\",serviceData.description||\"\");formData.append(\"phone_number\",serviceData.phone_number||\"\");formData.append(\"email\",serviceData.email);if(serviceData.capacity){formData.append(\"capacity\",serviceData.capacity);}formData.append(\"dates\",JSON.stringify(Array.isArray(serviceData.dates)?serviceData.dates:[]));if(Array.isArray(serviceData.photos)){serviceData.photos.forEach(file=>{formData.append(\"photos\",file);// MUST be \"photos\" to match upload.array(\"photos\")\n});}try{const res=await api.post(\"/services\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});return res.data;}catch(err){var _err$response;console.error(\"createService error:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);throw err;// so AddService catches and shows the red alert\n}};/* -----------------------------\r\n   LIST SERVICES (admin + user)\r\n------------------------------ */export const listServices=async function(){let options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const params={};// options.service_type should be exactly one of:\n// \"DJ\", \"Chef\", \"Cake Baker\", \"Florist\", \"Waiter\", \"Venue\"\nif(options.service_type&&options.service_type!==\"All\"){params.service_type=options.service_type;}const{data}=await api.get(\"/services\",{params});return Array.isArray(data.services)?data.services:[];};/* -----------------------------\r\n   GET SINGLE SERVICE + AVAIL.\r\n------------------------------ */export const getServiceDetails=async serviceId=>{const{data}=await api.get(\"/services/\".concat(serviceId,\"/details\"));// data = { ok: true, service, availability: [...] }\nreturn data;};// APPOINTMENTS API\nexport const listVendorsWithSlots=async appointmentType=>{const{data}=await api.get(\"/appointments/vendors\",{params:{type:appointmentType}});return Array.isArray(data.vendors)?data.vendors:[];};export const bookAppointment=async details=>{// details should now include user_id\nconst{data}=await api.post(\"/appointments\",details);return data;};export const listUserAppointments=async user_id=>{const{data}=await api.get(\"/appointments/my\",{params:{user_id}});return Array.isArray(data.appointments)?data.appointments:[];};// If you want a “user-named” alias:\nexport const listServicesForUser=listServices;// INVITATIONS API\nexport const sendInvitations=async(venue_id,invitations,message,sender_id)=>{// invitations: [{ recipient_name, recipient_email }, ...]\nconst{data}=await api.post(\"/invitations\",{sender_id,venue_id,invitations,message});return data;};export const listUserInvitations=async sender_id=>{const{data}=await api.get(\"/invitations/my\",{params:{sender_id}});return Array.isArray(data.invitations)?data.invitations:[];};export const getInvitationById=async id=>{const{data}=await api.get(\"/invitations/\".concat(id));return data.invitation;};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","api","create","baseURL","uploadGuestPhotos","invitationId","files","formData","FormData","forEach","f","append","data","post","concat","headers","submitGuestParking","payload","getParkingAvailability","get","available","loginAccount","then","res","registerAccount","createService","serviceData","service_type","name","address","price","description","phone_number","email","capacity","JSON","stringify","Array","isArray","dates","photos","file","err","_err$response","console","error","response","message","listServices","options","arguments","length","undefined","params","services","getServiceDetails","serviceId","listVendorsWithSlots","appointmentType","type","vendors","bookAppointment","details","listUserAppointments","user_id","appointments","listServicesForUser","sendInvitations","venue_id","invitations","sender_id","listUserInvitations","getInvitationById","id","invitation"],"sources":["C:/Users/Lenovo/Desktop/ll/Wedding-Planner-App/frontend/src/api/client.js"],"sourcesContent":["// src/Guest/api/client.js\r\nimport axios from \"axios\";\r\n\r\n// In Create React App we use process.env.REACT_APP_*\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000/api\";\r\n\r\n// Base API client\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n});\r\n\r\n/* -----------------------------\r\n   UPLOAD GUEST PHOTOS\r\n------------------------------ */\r\nexport const uploadGuestPhotos = async (invitationId, files) => {\r\n  const formData = new FormData();\r\n  [...files].forEach((f) => formData.append(\"photos\", f));\r\n\r\n  const { data } = await api.post(\r\n    `/guests/events/${invitationId}/photos`,\r\n    formData,\r\n    { headers: { \"Content-Type\": \"multipart/form-data\" } }\r\n  );\r\n\r\n  return data; // { ok, count, ... }\r\n};\r\n\r\n/* -----------------------------\r\n   SUBMIT GUEST PARKING INFO\r\n------------------------------ */\r\nexport const submitGuestParking = async (invitationId, payload) => {\r\n  const { data } = await api.post(\r\n    `/guests/events/${invitationId}/parking`,\r\n    payload\r\n  );\r\n  return data; // { ok: true, ... }\r\n};\r\n\r\n/* -----------------------------\r\n   GET PARKING AVAILABILITY\r\n------------------------------ */\r\nexport const getParkingAvailability = async () => {\r\n  const { data } = await api.get(\"/guests/parking/availability\");\r\n  return data.available; // number\r\n};\r\n\r\nexport const loginAccount = (payload) =>\r\n  api.post(\"/auth/login\", payload).then((res) => res.data);\r\n\r\nexport const registerAccount = (payload) =>\r\n  api.post(\"/auth/register\", payload).then((res) => res.data);\r\n\r\n// ADMIN: CREATE SERVICE\r\nexport const createService = async (serviceData) => {\r\n  const formData = new FormData();\r\n\r\n  formData.append(\"service_type\", serviceData.service_type);\r\n  formData.append(\"name\", serviceData.name);\r\n  formData.append(\"address\", serviceData.address || \"\");\r\n  formData.append(\"price\", serviceData.price);\r\n  formData.append(\"description\", serviceData.description || \"\");\r\n  formData.append(\"phone_number\", serviceData.phone_number || \"\");\r\n  formData.append(\"email\", serviceData.email);\r\n\r\n  if (serviceData.capacity) {\r\n    formData.append(\"capacity\", serviceData.capacity);\r\n  }\r\n\r\n  formData.append(\r\n    \"dates\",\r\n    JSON.stringify(Array.isArray(serviceData.dates) ? serviceData.dates : [])\r\n  );\r\n\r\n  if (Array.isArray(serviceData.photos)) {\r\n    serviceData.photos.forEach((file) => {\r\n      formData.append(\"photos\", file); // MUST be \"photos\" to match upload.array(\"photos\")\r\n    });\r\n  }\r\n\r\n  try {\r\n    const res = await api.post(\"/services\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    return res.data;\r\n  } catch (err) {\r\n    console.error(\"createService error:\", err.response?.data || err.message);\r\n    throw err; // so AddService catches and shows the red alert\r\n  }\r\n};\r\n\r\n/* -----------------------------\r\n   LIST SERVICES (admin + user)\r\n------------------------------ */\r\nexport const listServices = async (options = {}) => {\r\n  const params = {};\r\n\r\n  // options.service_type should be exactly one of:\r\n  // \"DJ\", \"Chef\", \"Cake Baker\", \"Florist\", \"Waiter\", \"Venue\"\r\n  if (options.service_type && options.service_type !== \"All\") {\r\n    params.service_type = options.service_type;\r\n  }\r\n\r\n  const { data } = await api.get(\"/services\", { params });\r\n  return Array.isArray(data.services) ? data.services : [];\r\n};\r\n\r\n/* -----------------------------\r\n   GET SINGLE SERVICE + AVAIL.\r\n------------------------------ */\r\nexport const getServiceDetails = async (serviceId) => {\r\n  const { data } = await api.get(`/services/${serviceId}/details`);\r\n  // data = { ok: true, service, availability: [...] }\r\n  return data;\r\n};\r\n\r\n// APPOINTMENTS API\r\nexport const listVendorsWithSlots = async (appointmentType) => {\r\n  const { data } = await api.get(\"/appointments/vendors\", {\r\n    params: { type: appointmentType }\r\n  });\r\n  return Array.isArray(data.vendors) ? data.vendors : [];\r\n};\r\n\r\nexport const bookAppointment = async (details) => {\r\n  // details should now include user_id\r\n  const { data } = await api.post(\"/appointments\", details);\r\n  return data;\r\n};\r\n\r\nexport const listUserAppointments = async (user_id) => {\r\n  const { data } = await api.get(\"/appointments/my\", { params: { user_id } });\r\n  return Array.isArray(data.appointments) ? data.appointments : [];\r\n};\r\n// If you want a “user-named” alias:\r\nexport const listServicesForUser = listServices;\r\n\r\n\r\n// INVITATIONS API\r\nexport const sendInvitations = async (venue_id, invitations, message, sender_id) => {\r\n  // invitations: [{ recipient_name, recipient_email }, ...]\r\n  const { data } = await api.post(\"/invitations\", {\r\n    sender_id,\r\n    venue_id,\r\n    invitations,\r\n    message\r\n  });\r\n  return data;\r\n};\r\n\r\nexport const listUserInvitations = async (sender_id) => {\r\n  const { data } = await api.get(\"/invitations/my\", { params: { sender_id } });\r\n  return Array.isArray(data.invitations) ? data.invitations : [];\r\n};\r\n\r\nexport const getInvitationById = async (id) => {\r\n  const { data } = await api.get(`/invitations/${id}`);\r\n  return data.invitation;\r\n};\r\n\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}